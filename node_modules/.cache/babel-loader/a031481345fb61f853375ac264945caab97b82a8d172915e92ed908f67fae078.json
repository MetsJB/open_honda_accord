{"ast":null,"code":"import{useState,useEffect,createContext}from\"react\";import Arrows from\"./Arrows/Arrows\";import Slide from\"./Slide/Slide\";import Dots from\"./Dots/Dots\";import getImages from\"./images\";import\"./Slider.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const WIDTH_PAGE=1000;const HEIGHT_PAGE=600;const AUTOPLAY=true;const AUTOPLAY_TIME=4000;export const SliderContext=/*#__PURE__*/createContext();const Slider=function(){const[items,setItems]=useState([]);const[slide,setSlide]=useState(0);const[animation,setAnimation]=useState(true);useEffect(()=>{const loadData=async()=>{const images=await getImages();setItems(images);};loadData();},[]);const preloadImages=()=>{const prevItemIndex=slide-1<0?items.length-1:slide-1;const nextItemIndex=(slide+1)%items.length;new Image().src=require(`./../../images/photo_auto/photo${slide+1}.jpg`);new Image().src=require(`./../../images/photo_auto/photo${prevItemIndex+1}.jpg`);new Image().src=require(`./../../images/photo_auto/photo${nextItemIndex+1}.jpg`);};useEffect(()=>{if(items.length){preloadImages();}},[slide,items]);const changeSlide=function(){let direction=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;setAnimation(false);let slideNumber=0;if(slide+direction<0){slideNumber=items.length-1;}else{slideNumber=(slide+direction)%items.length;}setSlide(slideNumber);const timeout=setTimeout(()=>{setAnimation(true);},0);return()=>{clearTimeout(timeout);};};const goToSlide=number=>{setAnimation(false);setSlide(number%items.length);const timeout=setTimeout(()=>{setAnimation(true);},0);return()=>{clearTimeout(timeout);};};useEffect(()=>{if(!AUTOPLAY)return;if(items.length){const interval=setInterval(()=>{changeSlide(1);},AUTOPLAY_TIME);return()=>{clearInterval(interval);};}},[items.length,slide]);return/*#__PURE__*/_jsx(\"div\",{className:\"slider\",style:{width:WIDTH_PAGE,minHeight:HEIGHT_PAGE},children:/*#__PURE__*/_jsxs(SliderContext.Provider,{value:{WIDTH_PAGE,HEIGHT_PAGE,goToSlide,changeSlide,slidesCount:items.length,slideNumber:slide},children:[/*#__PURE__*/_jsx(Arrows,{}),/*#__PURE__*/_jsx(\"div\",{className:\"window\",children:items.length?/*#__PURE__*/_jsx(Slide,{id:slide,animation:animation}):null}),/*#__PURE__*/_jsx(Dots,{})]})});};export default Slider;","map":{"version":3,"names":["useState","useEffect","createContext","Arrows","Slide","Dots","getImages","jsx","_jsx","jsxs","_jsxs","WIDTH_PAGE","HEIGHT_PAGE","AUTOPLAY","AUTOPLAY_TIME","SliderContext","Slider","items","setItems","slide","setSlide","animation","setAnimation","loadData","images","preloadImages","prevItemIndex","length","nextItemIndex","Image","src","require","changeSlide","direction","arguments","undefined","slideNumber","timeout","setTimeout","clearTimeout","goToSlide","number","interval","setInterval","clearInterval","className","style","width","minHeight","children","Provider","value","slidesCount","id"],"sources":["C:/Users/Zahar/Desktop/Task/frontend/src/components/Slider/Slider.jsx"],"sourcesContent":["import { useState, useEffect, createContext } from \"react\"\r\nimport Arrows from \"./Arrows/Arrows\"\r\nimport Slide from \"./Slide/Slide\"\r\nimport Dots from \"./Dots/Dots\"\r\nimport getImages from \"./images\"\r\nimport \"./Slider.css\"\r\n\r\nconst WIDTH_PAGE = 1000\r\nconst HEIGHT_PAGE = 600\r\nconst AUTOPLAY = true\r\nconst AUTOPLAY_TIME = 4000\r\n\r\nexport const SliderContext = createContext()\r\n\r\nconst Slider = function () {\r\n  const [items, setItems] = useState([])\r\n  const [slide, setSlide] = useState(0)\r\n  const [animation, setAnimation] = useState(true)\r\n\r\n  useEffect(() => {\r\n    const loadData = async () => {\r\n      const images = await getImages()\r\n      setItems(images)\r\n    }\r\n\r\n    loadData()\r\n  }, [])\r\n\r\n  const preloadImages = () => {\r\n    const prevItemIndex = slide - 1 < 0 ? items.length - 1 : slide - 1\r\n    const nextItemIndex = (slide + 1) % items.length\r\n\r\n    new Image().src = require(`./../../images/photo_auto/photo${slide + 1}.jpg`)\r\n    new Image().src = require(`./../../images/photo_auto/photo${\r\n      prevItemIndex + 1\r\n    }.jpg`)\r\n    new Image().src = require(`./../../images/photo_auto/photo${\r\n      nextItemIndex + 1\r\n    }.jpg`)\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (items.length) {\r\n      preloadImages()\r\n    }\r\n  }, [slide, items])\r\n\r\n  const changeSlide = (direction = 1) => {\r\n    setAnimation(false)\r\n    let slideNumber = 0\r\n\r\n    if (slide + direction < 0) {\r\n      slideNumber = items.length - 1\r\n    } else {\r\n      slideNumber = (slide + direction) % items.length\r\n    }\r\n\r\n    setSlide(slideNumber)\r\n\r\n    const timeout = setTimeout(() => {\r\n      setAnimation(true)\r\n    }, 0)\r\n\r\n    return () => {\r\n      clearTimeout(timeout)\r\n    }\r\n  }\r\n\r\n  const goToSlide = (number) => {\r\n    setAnimation(false)\r\n    setSlide(number % items.length)\r\n\r\n    const timeout = setTimeout(() => {\r\n      setAnimation(true)\r\n    }, 0)\r\n\r\n    return () => {\r\n      clearTimeout(timeout)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!AUTOPLAY) return\r\n\r\n    if (items.length) {\r\n      const interval = setInterval(() => {\r\n        changeSlide(1)\r\n      }, AUTOPLAY_TIME)\r\n\r\n      return () => {\r\n        clearInterval(interval)\r\n      }\r\n    }\r\n  }, [items.length, slide])\r\n  return (\r\n    <div\r\n      className=\"slider\"\r\n      style={{ width: WIDTH_PAGE, minHeight: HEIGHT_PAGE }}\r\n    >\r\n      <SliderContext.Provider\r\n        value={{\r\n          WIDTH_PAGE,\r\n          HEIGHT_PAGE,\r\n          goToSlide,\r\n          changeSlide,\r\n          slidesCount: items.length,\r\n          slideNumber: slide,\r\n        }}\r\n      >\r\n        <Arrows />\r\n        <div className=\"window\">\r\n          {items.length ? <Slide id={slide} animation={animation} /> : null}\r\n        </div>\r\n        <Dots />\r\n      </SliderContext.Provider>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Slider\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}